第2章 spring ioc容器的实现
    1、Ioc容器和依赖反转模式
       通过使用Ioc容器，对象之间的相互依赖关系由IoC容器进行管理，并由Ioc容器完成对象的注入。

    2、spring ioc应用场景
        提供了一个基本的javabean容器，通过ioc模式管理依赖关系，并通过ioc模式管理依赖关系，并通过依赖注入和aop切面增强了为javabean这样的
        pojo对象赋予事务管理等功能。

    3、ioc容器实现：两个主要容器系列BeanFactory和ApplicationContext
        BeanFactory : 接口只实现了容器的基本功能。 是最基本的接口类出现在spring的ioc容器体系中。
            第1条主线： BeanFactory、HierarchicalBeanFactory、ConfigurableBeanFactor
            应用场景：
                ClassPathResource res = new ClassPathResource("beans.xml");
                DefaultListableBeanFactory factory = new DefaultListableBeanFactory();
                XmlBeanDefinitionReader reader = new XmlBeanDefinitionReader(factory);
                reader.loadBeanDefinitions(res);

        ApplicationContext : 增加了一些功能
            第2条主线： BeanFactory、（ListableBeanFactory,AutowireCapableBeanFactory,HierarchicalBeanFactory)、
            ApplicationContext、（WebApplication，ConfigurableApplicationContext）
            应用场景：
        BeanDefinition : 管理基于Spring的应用中的各种对象以及它们之间的相互依赖关系,是一种数据类型。

        FactoryBean : 这个bean不是简单的Bean，是一个工厂Bean

    4、ioc容器的初始化过程
        ioc容器的初始化是有前面介绍的refresh()方法来启动的，这个方法标志着Ioc容器的正式启动。

       (1)、Resource：
            使用FileSystemResource 或者 使用ClassPathResource
       (2)、BeanDefinition载入和解析 :
            把用户定义好的Bean表示成ioc容器的数据结构
       (3)、BeanDefinitionRegistry :
            把载入过程中解析得到的BeanDefinition向Ioc容器进行注册。
            ioc容器将BeanDefinition注入到1个HashMap中，Ioc容器通过HashMap持有BeanDefinition

    5、Ioc的依赖注入
        依赖注入的过程是用户第一次向IoC容器索要Bean时触发的,但是通过控制lazy-init属性来让容器完成对Bean的赖加载。
        赖加载实际上也是一个完成依赖注入的过程，但它是在初始化的过程中完成的。

        当用户向Ioc容器索要Bean时候，调用getBean()方法，这个接口就是触发依赖注入的地方。
        在得到一个bean的时候，可以根据getDependsOn()方法，获得它所依赖的所有bean

        在调用完getBean()方法后，会调用createBean(),这个过程会根据BeanDefinition定义生成Bean对象。

    6、容器其他相关特性
       (1) ApplicationContext和Bean的初始化和销毁
            prepareBeanFactory 方法初始化
            doclose 方法关闭容器

       (2) Ioc容器中的Bean生命周期
           Bean实例的创建
           为Bean实例设置属性
           调用Bean的初始化方法
           应用可以通过Ioc容器使用Bean
           当容器关闭时，调用Bean的销毁方法

       (3) lazy-init属性和预实例化
           用户可以通过设置Bean的lazy-init属性来控制预实例化的过程。

       (4)FactoryBean的实现
          它是实现了FactoryBean<T>接口的Bean，根据该Bean的Id从BeanFactory中获取的实际上是FactoryBean的getObject()返回的对象，而不是FactoryBean本身，
          如果要获取FactoryBean对象，可以在id前面加一个&符号来获取

       (5)BeanPostProcessor的实现:
            实现了BeanPostProcessor接口定制我们自己的Bean处理器可以在Spring容器初始化Bean的时候做我们想做的很多事

       (6)autowiring(自动依赖装配)

       (7)BeanFactoryPostProcessor(spring后置处理器)的实现:
          https://my.oschina.net/u/1047640/blog/147036 参考文档
          http://www.cnblogs.com/mesopotamia/p/4987092.html
          beanFactoryPostprocessor的作用是在beanFactory初始化之后提供一个修改的机会
            实例化Bean之前,对注册表中的bean definitions的属性进行后期加工
            使用场景 占位符：PropertyPlaceholderConfigurer ：











